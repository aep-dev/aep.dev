<!DOCTYPE html>
<html lang="en-US" class="glue-flexbox">
  <head>
    <title>AEP-217: Unreachable resources</title>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link href="//fonts.googleapis.com/css?family=Roboto:100,300,400,500,700|Google+Sans:400,500|Product+Sans:400&amp;lang=en" rel="stylesheet"></link>
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" type="text/css" media="screen" href="//www.gstatic.com/glue/v22_1/glue.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=73a717cf">
    <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css?v=73a717cf">
    <script type="text/javascript" src="//code.jquery.com/jquery-3.4.0.min.js"></script>
    <script type="text/javascript" src="//www.gstatic.com/glue/latest/glue-detect.min.js"></script>
    <script type="text/javascript">
      $('html').css('visibility', 'hidden');
      $.when($.ready).then(() => {
        $('html').css('visibility', 'visible');
      });
    </script>
    <script type="text/javascript" src="/assets/js/global.js?v=73a717cf"></script>
    
<script type="text/javascript" src="/assets/js/syntax.js"></script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NSXMVSDN');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NSXMVSDN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
    <!-- prettier-ignore -->
<header class="glue-header glue-header--single">
  <div class="glue-header__bar glue-header__bar--desktop glue-header__drawer">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="API Enhancement Proposals">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                <!--<use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>-->
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- LINK BAR-->
      <div class="glue-header__container glue-header__container--flex-auto">
        <nav class="glue-header__link-bar">
          <ul id="list-1" class="glue-header__list">
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/general" aria-level="1">Browse AEPs</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/contributing" aria-level="1">Contributing</a>
                </li>
              
            
          </ul>
        </nav>
      </div>
      <!-- CTA-->
      <div class="glue-header__container glue-header__container--cta">
        <div class="glue-header__cta">
        <div class="glue-sitesearch">
          <form method="GET" action="/search">
          <label for="q">Search this site</label>
          <input class="glue-sitesearch__input" type="text" name="q" id="q"
            placeholder="Search AEPs">
          <button type="submit" class="glue-button glue-sitesearch__submit" title="Submit">
            <svg role="img" class="glue-icon glue-icon--24px">
            <use xlink:href="/assets/images/glue-icons.svg#search"></use>
            </svg>
          </button>
          </form>
        </div>
        <a href="https://github.com/aep-dev/aep.dev" target="_blank" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile header placeholder -->
  <div class="glue-header__bar glue-header__bar--mobile">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__hamburger glue-header__hamburger--first-tier">
            <div class="glue-header__hamburger-wrapper">
              <button type="button" class="glue-header__drawer-toggle-btn"
                aria-controls="drawer" aria-expanded="false" aria-label="Open the navigation drawer">
                <svg role="img" class="glue-icon glue-icon--24px"><use xlink:href="/assets/images/glue-icons.svg#menu"></use></svg>
              </button>
            </div>
          </div>
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="Google">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                  <!--<use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>-->
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <!-- SKIP -->
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- CTA -->
      <div class="glue-header__container">
        <div class="glue-header__cta">
        <a href="https://github.com/aep-dev/aep.dev" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <div class="glue-header__drawer-backdrop"></div>
</header>
    <div class="glue-page">
      
      <main role="main" id="page-content">
        
<nav id="aep-nav" class="docs-component-nav">
  <ul class="nav-list">
    <li class="nav-item nav-item-header">AEPs by Scope</li>
    <li class="nav-item">
      <a href="/general">General</a>
    </li>
    <li class="nav-item nav-item-header">AEPs</li>
    <li class="nav-item"><b>Meta</b></li>
      <li class="nav-item">
          <a href="/1">
            <span class="aep-id">1</span>
            AEP Purpose and Guidelines
          </a>
        </li>
      <li class="nav-item">
          <a href="/2">
            <span class="aep-id">2</span>
            AEP Numbering and Organization
          </a>
        </li>
      <li class="nav-item">
          <a href="/8">
            <span class="aep-id">8</span>
            AEP Style and Guidance
          </a>
        </li>
      <li class="nav-item"><b>General</b></li>
      <li class="nav-item">
          <a href="/3">
            <span class="aep-id">3</span>
            Glossary
          </a>
        </li>
      <li class="nav-item">
          <a href="/5">
            <span class="aep-id">5</span>
            Designing an API
          </a>
        </li>
      <li class="nav-item"><b>Resources</b></li>
      <li class="nav-item">
          <a href="/122">
            <span class="aep-id">122</span>
            Resource paths
          </a>
        </li>
      <li class="nav-item">
          <a href="/126">
            <span class="aep-id">126</span>
            Enumerations
          </a>
        </li>
      <li class="nav-item">
          <a href="/4">
            <span class="aep-id">4</span>
            Resource types
          </a>
        </li>
      <li class="nav-item">
          <a href="/121">
            <span class="aep-id">121</span>
            Resource-oriented design
          </a>
        </li>
      <li class="nav-item">
          <a href="/124">
            <span class="aep-id">124</span>
            Resource association
          </a>
        </li>
      <li class="nav-item">
          <a href="/156">
            <span class="aep-id">156</span>
            Singleton resources
          </a>
        </li>
      <li class="nav-item">
          <a href="/159">
            <span class="aep-id">159</span>
            Reading across collections
          </a>
        </li>
      <li class="nav-item"><b>Standard Methods</b></li>
      <li class="nav-item">
          <a href="/130">
            <span class="aep-id">130</span>
            Methods
          </a>
        </li>
      <li class="nav-item">
          <a href="/131">
            <span class="aep-id">131</span>
            Get
          </a>
        </li>
      <li class="nav-item">
          <a href="/132">
            <span class="aep-id">132</span>
            List
          </a>
        </li>
      <li class="nav-item">
          <a href="/136">
            <span class="aep-id">136</span>
            Custom methods
          </a>
        </li>
      <li class="nav-item">
          <a href="/133">
            <span class="aep-id">133</span>
            Create
          </a>
        </li>
      <li class="nav-item">
          <a href="/134">
            <span class="aep-id">134</span>
            Update
          </a>
        </li>
      <li class="nav-item">
          <a href="/135">
            <span class="aep-id">135</span>
            Delete
          </a>
        </li>
      <li class="nav-item"><b>Fields</b></li>
      <li class="nav-item">
          <a href="/141">
            <span class="aep-id">141</span>
            Quantities
          </a>
        </li>
      <li class="nav-item">
          <a href="/142">
            <span class="aep-id">142</span>
            Time and duration
          </a>
        </li>
      <li class="nav-item">
          <a href="/144">
            <span class="aep-id">144</span>
            Array fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/145">
            <span class="aep-id">145</span>
            Ranges
          </a>
        </li>
      <li class="nav-item">
          <a href="/140">
            <span class="aep-id">140</span>
            Field names
          </a>
        </li>
      <li class="nav-item">
          <a href="/146">
            <span class="aep-id">146</span>
            Generic fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/148">
            <span class="aep-id">148</span>
            Standard fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/203">
            <span class="aep-id">203</span>
            Field behavior documentation
          </a>
        </li>
      <li class="nav-item"><b>Types</b></li>
      <li class="nav-item">
          <a href="/210">
            <span class="aep-id">210</span>
            Unicode
          </a>
        </li>
      <li class="nav-item">
          <a href="/143">
            <span class="aep-id">143</span>
            Standardized codes
          </a>
        </li>
      <li class="nav-item">
          <a href="/213">
            <span class="aep-id">213</span>
            Common components
          </a>
        </li>
      <li class="nav-item">
          <a href="/215">
            <span class="aep-id">215</span>
            Common component versions
          </a>
        </li>
      <li class="nav-item"><b>Design Patterns</b></li>
      <li class="nav-item">
          <a href="/154">
            <span class="aep-id">154</span>
            Resource freshness validation
          </a>
        </li>
      <li class="nav-item">
          <a href="/158">
            <span class="aep-id">158</span>
            Pagination
          </a>
        </li>
      <li class="nav-item">
          <a href="/151">
            <span class="aep-id">151</span>
            Long-running operations
          </a>
        </li>
      <li class="nav-item">
          <a href="/164">
            <span class="aep-id">164</span>
            Soft delete
          </a>
        </li>
      <li class="nav-item">
          <a href="/211">
            <span class="aep-id">211</span>
            Authorization checks
          </a>
        </li>
      <li class="nav-item">
          <a href="/157">
            <span class="aep-id">157</span>
            Partial responses
          </a>
        </li>
      <li class="nav-item">
          <a href="/160">
            <span class="aep-id">160</span>
            Filtering
          </a>
        </li>
      <li class="nav-item">
          <a href="/161">
            <span class="aep-id">161</span>
            Field masks
          </a>
        </li>
      <li class="nav-item">
          <a href="/162">
            <span class="aep-id">162</span>
            Resource Revisions
          </a>
        </li>
      <li class="nav-item">
          <a href="/193">
            <span class="aep-id">193</span>
            Errors
          </a>
        </li>
      <li class="nav-item">
          <a href="/214">
            <span class="aep-id">214</span>
            Resource expiration
          </a>
        </li>
      <li class="nav-item">
          <a href="/216">
            <span class="aep-id">216</span>
            States
          </a>
        </li>
      <li class="nav-item nav-item-active">
          <a href="/217">
            <span class="aep-id">217</span>
            Unreachable resources
          </a>
        </li>
      <li class="nav-item"><b>Batch Methods</b></li>
      <li class="nav-item">
          <a href="/231">
            <span class="aep-id">231</span>
            Batch methods: Get
          </a>
        </li>
      <li class="nav-item">
          <a href="/233">
            <span class="aep-id">233</span>
            Batch methods: Create
          </a>
        </li>
      <li class="nav-item">
          <a href="/234">
            <span class="aep-id">234</span>
            Batch methods: Update
          </a>
        </li>
      <li class="nav-item">
          <a href="/235">
            <span class="aep-id">235</span>
            Batch methods: Delete
          </a>
        </li>
      <li class="nav-item"><b>Security</b></li>
      <li class="nav-item"><b>Governance</b></li>
      <li class="nav-item">
          <a href="/100">
            <span class="aep-id">100</span>
            API Design Review FAQ
          </a>
        </li>
      <li class="nav-item">
          <a href="/205">
            <span class="aep-id">205</span>
            Beta-blocking changes
          </a>
        </li>
      <li class="nav-item"><b>Best Practices</b></li>
      <li class="nav-item">
          <a href="/180">
            <span class="aep-id">180</span>
            Backwards compatibility
          </a>
        </li>
      <li class="nav-item">
          <a href="/181">
            <span class="aep-id">181</span>
            Stability levels
          </a>
        </li>
      <li class="nav-item">
          <a href="/192">
            <span class="aep-id">192</span>
            Documentation
          </a>
        </li>
      <li class="nav-item">
          <a href="/200">
            <span class="aep-id">200</span>
            Precedent
          </a>
        </li>
      <li class="nav-item"><b>Protocol buffers</b></li>
      <li class="nav-item">
          <a href="/127">
            <span class="aep-id">127</span>
            HTTP and gRPC Transcoding
          </a>
        </li>
      <li class="nav-item">
          <a href="/191">
            <span class="aep-id">191</span>
            File and directory structure
          </a>
        </li>
      </ul>
</nav>
<section id="jump-content">
          
<aside id="aep-sidebar" class="docs-component-sidebar">
  <table id="aep-summary">
    <tr><th colspan="2">Unreachable resources</th></tr>
    <tr><td>Slug</td><td>unreachable-resources</td></tr>
    <tr><td>Number</td><td>217</td></tr>
    <tr><td>Permalink</td><td><a href="https://aep.dev/217">aep.dev/217</a></td></tr>
    <tr><td>State</td><td>Approved</td></tr>
    <tr><td>Created</td><td>2024-07-02</td></tr>
    <tr><td>Updated</td><td>2024-07-02</td></tr>
  </table>

  <section id="aep-toc" class="docs-component-sidebar-toc">
    <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#guidance">Guidance</a><ul>
<li><a href="#pagination">Pagination</a></li>
</ul>
</li>
<li><a href="#further-reading">Further reading</a></li>
</ul>
</div>

  </section>

  <section class="docs-component-sidebar-actions">
    <ul>
      <li><a href="https://github.com/aep-dev/aep.dev/issues/">File Bug</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/blob/master/aep/general/0217">View source</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/edit/master/aep/general/0217">Edit this page</a></li>
    </ul>
  </section>
</aside>
<section id="aep-main" class="docs-component-main">
  <section class="section-breadcrumbs">
  <nav
    class="glue-breadcrumbs glue-mod-mt-std glue-mod-mb-std"
    aria-label="You are here."
  >
    <ol class="glue-breadcrumbs__list aep-breadcrumbs">
      <li class="glue-breadcrumbs__item" aria-level="1">
        <a class="glue-breadcrumbs__link" href="/">
          API Enhancement Proposals
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item" aria-level="2">
        <a class="glue-breadcrumbs__link" href="/general">
          General AEPs
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item glue-breadcrumbs__item--active"
          aria-level="3">
        Unreachable resources
      </li>
    </ol>
  </nav>
</section>
  
  <h4 class="aep-id">unreachable-resources (AEP-217)</h4>
  <h1 id="unreachable-resources">Unreachable resources</h1>
<p>Occasionally, a user may ask for a list of resources, and some set of resources
in the list are temporarily unavailable. For example, a user may ask to list
resources across multiple parent locations, but one of those locations is
temporarily unreachable. In this situation, it is still desirable to provide
the user with all the available resources, while indicating that something is
missing.</p>
<h2 id="guidance">Guidance</h2>
<p>If a method to retrieve data is capable of partially failing due to one or more
resources being temporarily unreachable, the response message <strong>must</strong> include
a field to indicate this:</p>
<div class="tabbed-set" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">Protocol buffers</label><div class="tabbed-content">
<div class="highlight language-proto"><pre><span></span><code><span class="kd">message</span><span class="w"> </span><span class="nc">ListBooksResponse</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// The books matching the request.</span>
<span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">Book</span><span class="w"> </span><span class="na">books</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// The next page token, if there are more books matching the</span>
<span class="w">  </span><span class="c1">// request.</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">next_page_token</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Unreachable resources.</span>
<span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="na">unreachable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</div>
<input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><label for="__tabbed_1_2">OpenAPI 3.0</label><div class="tabbed-content">
<p><strong>Note:</strong> OAS example note yet written.</p>
</div>
</div>
<ul>
<li>The field <strong>must</strong> be a repeated string/string array, and <strong>must</strong> be named
  <code>unreachable</code>.</li>
<li>The field <strong>must</strong> be set to the paths of the resources which are the cause
  of the issue, such as the parent or individual resources that could not be
  reached. The objects listed as unreachable <strong>may</strong> be <em>parents</em> (or higher
  ancestors) rather than the individual resources being requested. For example,
  if a location is unreachable, the location is listed.<ul>
<li>The response <strong>must not</strong> provide any other information about the issue,
  such as error details or codes. Toe enable users to discover what the
  underlying issue is, APIs <strong>should</strong> provide an API method that provides
  more specific information.</li>
<li>The service <strong>must</strong> provide a way for the user to get an error with
  additional information, and <strong>should</strong> allow the user to repeat the
  original call with more restrictive parameters in order to do so.</li>
<li>The resource paths provided in this field <strong>may</strong> be heterogeneous. The
  field <strong>should</strong> document what potential resources may be provided in this
  field, and note that it might expand later.</li>
</ul>
</li>
</ul>
<p><strong>Important:</strong> If a single unreachable location or resource prevents returning
any data by definition (for example, a list request for a single publisher
where that publisher is unreachable), the service <strong>must</strong> fail the entire
request with an error.</p>
<h3 id="pagination">Pagination</h3>
<p>When paginating over a list, it is likely that the service will not know that
there are unreachable parents or resources initially. Further, parents may
alternate between being available and unavailable in unpredictable ways
throughout the process of listing all the requested resources.</p>
<p>These facts lead to the following guidance:</p>
<ul>
<li>The response <strong>must</strong> provide any outstanding unreachable locations or
  resources in the <code>unreachable</code> field on pages <em>following</em> the final page that
  contains a resource.<ul>
<li>The response <strong>should not</strong> include both requested data and unreachable
  resources on the same page.<ul>
<li>For example, if there are two pages of books and one unavailable
  publisher, there should be three pages total: first the two pages of
  books, and then a final page with no books and the unavailable publisher.</li>
</ul>
</li>
<li>If the number of unreachable resources to list is very large, the response
  <strong>should</strong> honor the <code>max_page_size</code> field in the same way as for
  resources. In this case, all pages with requested information <strong>should</strong>
  precede all pages with unavailable resources or locations.</li>
<li>The final page's <code>unreachable</code> field <strong>must</strong> <em>only</em> include resources or
  parents that were partially provided (or missing completely) across the
  entirety of the pagination process.<ul>
<li>For example, if a parent or resource was unreachable at the beginning of
  pagination and it became reachable again and the entire set of previously
  unreachable data was provided to the user on any page, the <code>unreachable</code>
  field <strong>must not</strong> include the intermittently-unreachable parent or
  resource.</li>
<li>On the other hand, if only <em>some</em> of the resources for a given parent are
  provided during such an incident as described above, the parent or
  resource <strong>must</strong> be included in the <code>unreachable</code> field.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="further-reading">Further reading</h2>
<ul>
<li>For listing across collections, see
  <a href="./reading-across-collections">reading-across-collections</a>.</li>
</ul>
  <footer>
  Except as otherwise noted, the content of this page is licensed under the
  <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
  Attribution 4.0 License</a>, and code samples are licensed under the
  <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
  <span class="no-print">For details, see <a href="/licensing">content
  licensing</a>.</span>
</footer>
</section>

        </section>
      </main>
      
    </div>
    <script src="//www.gstatic.com/external_hosted/hammerjs/v2_0_2/hammer.min.js"></script>
    <script src="//www.gstatic.com/glue/v22_1/glue-vanilla.min.js"></script>
    <script type="text/javascript">
      const headerElement = document.querySelector('.glue-header');
      if (headerElement) {
        new window.glue.ui.header.Header(headerElement);
      }
    </script>
  </body>
</html>