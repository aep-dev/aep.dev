<!DOCTYPE html>
<html lang="en-US" class="glue-flexbox">
  <head>
    <title>AEP-142: Time and duration</title>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link href="//fonts.googleapis.com/css?family=Roboto:100,300,400,500,700|Google+Sans:400,500|Product+Sans:400&amp;lang=en" rel="stylesheet"></link>
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" type="text/css" media="screen" href="//www.gstatic.com/glue/v22_1/glue.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=e6952fd3">
    <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css?v=e6952fd3">
    <script type="text/javascript" src="//code.jquery.com/jquery-3.4.0.min.js"></script>
    <script type="text/javascript" src="//www.gstatic.com/glue/latest/glue-detect.min.js"></script>
    <script type="text/javascript">
      $('html').css('visibility', 'hidden');
      $.when($.ready).then(() => {
        $('html').css('visibility', 'visible');
      });
    </script>
    <script type="text/javascript" src="/assets/js/global.js?v=e6952fd3"></script>
    
<script type="text/javascript" src="/assets/js/syntax.js"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140054909-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-140054909-1');
    </script>
  </head>
  <body>
    <!-- prettier-ignore -->
<header class="glue-header glue-header--single">
  <div class="glue-header__bar glue-header__bar--desktop glue-header__drawer">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="Google">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                <use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- LINK BAR-->
      <div class="glue-header__container glue-header__container--flex-auto">
        <nav class="glue-header__link-bar">
          <ul id="list-1" class="glue-header__list">
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/general" aria-level="1">Browse AEPs</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/contributing" aria-level="1">Contributing</a>
                </li>
              
            
          </ul>
        </nav>
      </div>
      <!-- CTA-->
      <div class="glue-header__container glue-header__container--cta">
        <div class="glue-header__cta">
        <div class="glue-sitesearch">
          <form method="GET" action="/search">
          <label for="q">Search this site</label>
          <input class="glue-sitesearch__input" type="text" name="q" id="q"
            placeholder="Search AEPs">
          <button type="submit" class="glue-button glue-sitesearch__submit" title="Submit">
            <svg role="img" class="glue-icon glue-icon--24px">
            <use xlink:href="/assets/images/glue-icons.svg#search"></use>
            </svg>
          </button>
          </form>
        </div>
        <a href="https://github.com/aep-dev/aep.dev" target="_blank" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile header placeholder -->
  <div class="glue-header__bar glue-header__bar--mobile">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__hamburger glue-header__hamburger--first-tier">
            <div class="glue-header__hamburger-wrapper">
              <button type="button" class="glue-header__drawer-toggle-btn"
                aria-controls="drawer" aria-expanded="false" aria-label="Open the navigation drawer">
                <svg role="img" class="glue-icon glue-icon--24px"><use xlink:href="/assets/images/glue-icons.svg#menu"></use></svg>
              </button>
            </div>
          </div>
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="Google">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                  <use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <!-- SKIP -->
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- CTA -->
      <div class="glue-header__container">
        <div class="glue-header__cta">
        <a href="https://github.com/aep-dev/aep.dev" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <div class="glue-header__drawer-backdrop"></div>
</header>
    <div class="glue-page">
      
      <main role="main" id="page-content">
        
<nav id="aep-nav" class="docs-component-nav">
  <ul class="nav-list">
    <li class="nav-item nav-item-header">AEPs by Scope</li>
    <li class="nav-item">
      <a href="/general">General</a>
    </li>
    <li class="nav-item nav-item-header">AEPs</li>
    <li class="nav-item">
      <a href="/1">
        <span class="aep-number">1</span>
        AEP Purpose and Guidelines
      </a>
    </li>
    <li class="nav-item">
      <a href="/126">
        <span class="aep-number">126</span>
        Enumerations
      </a>
    </li>
    <li class="nav-item">
      <a href="/131">
        <span class="aep-number">131</span>
        GET for individual resources
      </a>
    </li>
    <li class="nav-item">
      <a href="/132">
        <span class="aep-number">132</span>
        GET for collections
      </a>
    </li>
    <li class="nav-item">
      <a href="/136">
        <span class="aep-number">136</span>
        Custom operations
      </a>
    </li>
    <li class="nav-item">
      <a href="/141">
        <span class="aep-number">141</span>
        Quantities
      </a>
    </li>
    <li class="nav-item nav-item-active">
      <a href="/142">
        <span class="aep-number">142</span>
        Time and duration
      </a>
    </li>
    <li class="nav-item">
      <a href="/144">
        <span class="aep-number">144</span>
        Array fields
      </a>
    </li>
    <li class="nav-item">
      <a href="/145">
        <span class="aep-number">145</span>
        Ranges
      </a>
    </li>
    <li class="nav-item">
      <a href="/151">
        <span class="aep-number">151</span>
        Long-running requests
      </a>
    </li>
    <li class="nav-item">
      <a href="/154">
        <span class="aep-number">154</span>
        Resource freshness validation
      </a>
    </li>
    <li class="nav-item">
      <a href="/158">
        <span class="aep-number">158</span>
        Pagination
      </a>
    </li>
    <li class="nav-item">
      <a href="/164">
        <span class="aep-number">164</span>
        Soft delete
      </a>
    </li>
    <li class="nav-item">
      <a href="/210">
        <span class="aep-number">210</span>
        Unicode
      </a>
    </li>
    <li class="nav-item">
      <a href="/211">
        <span class="aep-number">211</span>
        Authorization checks
      </a>
    </li>
    </ul>
</nav>
<section id="jump-content">
          
<aside id="aep-sidebar" class="docs-component-sidebar">
  <table id="aep-summary">
    <tr><th colspan="2">Time and duration</th></tr>
    <tr><td>Number</td><td>142</td></tr>
    <tr><td>Permalink</td><td><a href="https://aep.dev/142">aep.dev/142</a></td></tr>
    <tr><td>State</td><td>Approved</td></tr>
    <tr><td>Created</td><td>2019-07-16</td></tr>
    <tr><td>Updated</td><td>2019-07-16</td></tr>
  </table>

  <section id="aep-toc" class="docs-component-sidebar-toc">
    <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#guidance">Guidance</a><ul>
<li><a href="#timestamps">Timestamps</a></li>
<li><a href="#durations">Durations</a></li>
<li><a href="#fractional-seconds">Fractional seconds</a></li>
<li><a href="#civil-dates-and-times">Civil dates and times</a></li>
<li><a href="#recurring-time">Recurring time</a></li>
<li><a href="#compatibility">Compatibility</a></li>
</ul>
</li>
</ul>
</div>

  </section>

  <section class="docs-component-sidebar-actions">
    <ul>
      <li><a href="https://github.com/aep-dev/aep.dev/issues/">File Bug</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/blob/master/aep/general/0142">View source</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/edit/master/aep/general/0142">Edit this page</a></li>
    </ul>
  </section>
</aside>
<section id="aep-main" class="docs-component-main">
  <section class="section-breadcrumbs">
  <nav
    class="glue-breadcrumbs glue-mod-mt-std glue-mod-mb-std"
    aria-label="You are here."
  >
    <ol class="glue-breadcrumbs__list aep-breadcrumbs">
      <li class="glue-breadcrumbs__item" aria-level="1">
        <a class="glue-breadcrumbs__link" href="/">
          API Improvement Proposals
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item" aria-level="2">
        <a class="glue-breadcrumbs__link" href="/general">
          General AEPs
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item glue-breadcrumbs__item--active"
          aria-level="3">
        Time and duration
      </li>
    </ol>
  </nav>
</section>
  
  <h4 class="aep-number">AEP-142</h4>
  <h1 id="time-and-duration">Time and duration</h1>
<p>Many services need to represent the concepts surrounding time. Representing
time can be challenging due to the intricacies of calendars and time zones, as
well as the fact that common exchange formats (such as JSON) lack a native
concept of time.</p>
<h2 id="guidance">Guidance</h2>
<p>Fields representing time <strong>should</strong> use a <code>string</code> field with values conforming
to <a href="https://datatracker.ietf.org/doc/html/rfc3339">RFC 3339</a>, such as <code>2012-04-21T15:00:00Z</code>.</p>
<p>Services <strong>should</strong> use IDL-specific timestamps or format indicators where
applicable (such as <a href="https://github.com/protocolbuffers/protobuf/blob/master/src/google/protobuf/timestamp.proto"><code>google.protobuf.Timestamp</code></a> in protocol
buffers, or <code>format: date-time</code> in OpenAPI) provided that the service converts
values to RFC 3339 timestamp strings in JSON.</p>
<h3 id="timestamps">Timestamps</h3>
<p>Fields that represent an absolute point in time (independent of any time zone
or calendar) <strong>should</strong> use a <code>string</code> field with RFC 3339 values, and
<strong>should</strong> send values in UTC, with the <code>Z</code> time zone explicitly included.</p>
<p>These fields <strong>should</strong> have names ending in <code>_time</code>, such as <code>create_time</code> or
<code>update_time</code>. For array fields, the names <strong>should</strong> end in <code>_times</code> instead.</p>
<p>Many timestamp fields refer to an activity (for example, <code>create_time</code> refers
to when the applicable resource was created). For these, the field <strong>should</strong>
be named with the <code>{root_word}_time</code> form. For example, if a book is being
published, the field storing the time when this happens would use the root form
of the verb "to publish" ("publish"), resulting in a field called
<code>publish_time</code>. Fields <strong>should not</strong> be named using the past tense (such as
<code>published_time</code>, <code>created_time</code> or <code>last_updated_time</code>).</p>
<p>When accepting timestamps as input, services <strong>should</strong> canonicalize the
timestamp into UTC, and return values in UTC.</p>
<h3 id="durations">Durations</h3>
<p>Fields that represent a span between two points in time (independent of any
time zone or calendar) <strong>should</strong> use an <code>int</code> field if there is a single
canonical unit (for example, <code>ttl_seconds</code> for an expiring resource, or
<code>offset_seconds</code> for position in a video).</p>
<p><strong>Note:</strong> A <code>float</code> field <strong>may</strong> be used if fractional seconds are needed.
However, only fractional seconds are permitted; other fractional units (such as
hours or days) <strong>must not</strong> be used.</p>
<p>If there is no canonical unit, the service <strong>should</strong> use a <code>string</code> field with
<a href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO 8601</a> duration values, such as <code>P3Y6M4DT12H30M5S</code>. The field name
<strong>should</strong> end with <code>_duration</code>. Designators for zero values <strong>may</strong> be omitted
in accordance with ISO 8601 (for example: <code>PT12H</code> is sufficient to represent
"12 hours"), but at least one designator <strong>must</strong> be present (therefore, a zero
duration is <code>PT0S</code> or <code>P0D</code>).</p>
<p>Services <strong>should</strong> use IDL-specific durations where applicable (such as
<a href="https://github.com/protocolbuffers/protobuf/blob/master/src/google/protobuf/duration.proto"><code>google.protobuf.Duration</code></a> in protocol buffers) provided that the
service converts values to ISO 8601 duration strings in JSON.</p>
<h3 id="fractional-seconds">Fractional seconds</h3>
<p>Services <strong>may</strong> support fractional seconds for both timestamps and durations,
but <strong>should not</strong> support precision more granular than the nanosecond.
Services <strong>may</strong> also limit the supported precision, and <strong>may</strong> <em>truncate</em>
values received from the user to the supported precision.</p>
<p><strong>Note:</strong> Truncation is recommended rather than rounding because rounding to
the nearest second has the potential to change day, month, year, etc., which is
surprisingly significant.</p>
<h3 id="civil-dates-and-times">Civil dates and times</h3>
<p>Fields that represent a calendar date or wall-clock time <strong>should</strong> use partial
ISO 8601 strings.</p>
<p>Fields representing civil dates <strong>should</strong> have names ending in <code>_date</code>, while
fields representing civil times or datetimes <strong>should</strong> have names ending in
<code>_time</code>.</p>
<h3 id="recurring-time">Recurring time</h3>
<p>A service that needs to document a recurring event <strong>should</strong> use cronspec if
cronspec is able to support the service's use case.</p>
<h3 id="compatibility">Compatibility</h3>
<p>Occasionally, APIs are unable to use RFC 3339 strings for legacy or
compatibility reasons. For example, an API may conform to a separate
specification that mandates that timestamps be Unix timestamp integers.</p>
<p>In these situations, fields <strong>may</strong> use other types. If possible, the following
naming conventions apply:</p>
<ul>
<li>Unix timestamps <strong>should</strong> use a <code>unix_time</code> suffix.<ul>
<li>Multipliers of Unix time (such as milliseconds) <strong>should not</strong> be used; if
  they are unavoidable, the field name <strong>should</strong> use both <code>unix_time</code> and
  the unit, such as <code>unix_time_millis</code>.</li>
</ul>
</li>
<li>For other integers, include the meaning (examples: <code>time</code>, <code>duration</code>,
  <code>delay</code>, <code>latency</code>) <strong>and</strong> the unit of measurement (valid values: <code>seconds</code>,
  <code>millis</code>, <code>micros</code>, <code>nanos</code>) as a final suffix. For example,
  <code>send_time_millis</code>.</li>
<li>For strings, include the meaning (examples: <code>time</code>, <code>duration</code>, <code>delay</code>,
  <code>latency</code>) but no unit suffix.</li>
</ul>
<p>In all cases, clearly document the expected format, and the rationale for its
use.</p>
<!-- prettier-ignore-start -->
<!-- prettier-ignore-end -->
  <footer>
  Except as otherwise noted, the content of this page is licensed under the
  <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
  Attribution 4.0 License</a>, and code samples are licensed under the
  <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
  <span class="no-print">For details, see <a href="/licensing">content
  licensing</a>.</span>
</footer>
</section>

        </section>
      </main>
      
    </div>
    <script src="//www.gstatic.com/external_hosted/hammerjs/v2_0_2/hammer.min.js"></script>
    <script src="//www.gstatic.com/glue/v22_1/glue-vanilla.min.js"></script>
    <script type="text/javascript">
      const headerElement = document.querySelector('.glue-header');
      if (headerElement) {
        new window.glue.ui.header.Header(headerElement);
      }
    </script>
  </body>
</html>