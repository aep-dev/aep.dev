<!DOCTYPE html>
<html lang="en-US" class="glue-flexbox">
  <head>
    <title>AEP-203: Field behavior documentation</title>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link href="//fonts.googleapis.com/css?family=Roboto:100,300,400,500,700|Google+Sans:400,500|Product+Sans:400&amp;lang=en" rel="stylesheet"></link>
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" type="text/css" media="screen" href="//www.gstatic.com/glue/v22_1/glue.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=c548c16e">
    <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css?v=c548c16e">
    <script type="text/javascript" src="//code.jquery.com/jquery-3.4.0.min.js"></script>
    <script type="text/javascript" src="//www.gstatic.com/glue/latest/glue-detect.min.js"></script>
    <script type="text/javascript">
      $('html').css('visibility', 'hidden');
      $.when($.ready).then(() => {
        $('html').css('visibility', 'visible');
      });
    </script>
    <script type="text/javascript" src="/assets/js/global.js?v=c548c16e"></script>
    
<script type="text/javascript" src="/assets/js/syntax.js"></script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NSXMVSDN');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NSXMVSDN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
    <!-- prettier-ignore -->
<header class="glue-header glue-header--single">
  <div class="glue-header__bar glue-header__bar--desktop glue-header__drawer">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="API Enhancement Proposals">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                <!--<use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>-->
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- LINK BAR-->
      <div class="glue-header__container glue-header__container--flex-auto">
        <nav class="glue-header__link-bar">
          <ul id="list-1" class="glue-header__list">
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/general" aria-level="1">Browse AEPs</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/contributing" aria-level="1">Contributing</a>
                </li>
              
            
          </ul>
        </nav>
      </div>
      <!-- CTA-->
      <div class="glue-header__container glue-header__container--cta">
        <div class="glue-header__cta">
        <div class="glue-sitesearch">
          <form method="GET" action="/search">
          <label for="q">Search this site</label>
          <input class="glue-sitesearch__input" type="text" name="q" id="q"
            placeholder="Search AEPs">
          <button type="submit" class="glue-button glue-sitesearch__submit" title="Submit">
            <svg role="img" class="glue-icon glue-icon--24px">
            <use xlink:href="/assets/images/glue-icons.svg#search"></use>
            </svg>
          </button>
          </form>
        </div>
        <a href="https://github.com/aep-dev/aep.dev" target="_blank" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile header placeholder -->
  <div class="glue-header__bar glue-header__bar--mobile">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__hamburger glue-header__hamburger--first-tier">
            <div class="glue-header__hamburger-wrapper">
              <button type="button" class="glue-header__drawer-toggle-btn"
                aria-controls="drawer" aria-expanded="false" aria-label="Open the navigation drawer">
                <svg role="img" class="glue-icon glue-icon--24px"><use xlink:href="/assets/images/glue-icons.svg#menu"></use></svg>
              </button>
            </div>
          </div>
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="Google">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                  <!--<use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>-->
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <!-- SKIP -->
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- CTA -->
      <div class="glue-header__container">
        <div class="glue-header__cta">
        <a href="https://github.com/aep-dev/aep.dev" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <div class="glue-header__drawer-backdrop"></div>
</header>
    <div class="glue-page">
      
      <main role="main" id="page-content">
        
<nav id="aep-nav" class="docs-component-nav">
  <ul class="nav-list">
    <li class="nav-item nav-item-header">AEPs by Scope</li>
    <li class="nav-item">
      <a href="/general">General</a>
    </li>
    <li class="nav-item nav-item-header">AEPs</li>
    <li class="nav-item"><b>Meta</b></li>
      <li class="nav-item">
          <a href="/1">
            <span class="aep-id">1</span>
            AEP Purpose and Guidelines
          </a>
        </li>
      <li class="nav-item">
          <a href="/2">
            <span class="aep-id">2</span>
            AEP Numbering and Organization
          </a>
        </li>
      <li class="nav-item">
          <a href="/8">
            <span class="aep-id">8</span>
            AEP Style and Guidance
          </a>
        </li>
      <li class="nav-item"><b>General</b></li>
      <li class="nav-item">
          <a href="/3">
            <span class="aep-id">3</span>
            Glossary
          </a>
        </li>
      <li class="nav-item">
          <a href="/5">
            <span class="aep-id">5</span>
            Designing an API
          </a>
        </li>
      <li class="nav-item"><b>Resources</b></li>
      <li class="nav-item">
          <a href="/122">
            <span class="aep-id">122</span>
            Resource paths
          </a>
        </li>
      <li class="nav-item">
          <a href="/126">
            <span class="aep-id">126</span>
            Enumerations
          </a>
        </li>
      <li class="nav-item">
          <a href="/4">
            <span class="aep-id">4</span>
            Resource types
          </a>
        </li>
      <li class="nav-item">
          <a href="/121">
            <span class="aep-id">121</span>
            Resource-oriented design
          </a>
        </li>
      <li class="nav-item">
          <a href="/124">
            <span class="aep-id">124</span>
            Resource association
          </a>
        </li>
      <li class="nav-item">
          <a href="/156">
            <span class="aep-id">156</span>
            Singleton resources
          </a>
        </li>
      <li class="nav-item">
          <a href="/159">
            <span class="aep-id">159</span>
            Reading across collections
          </a>
        </li>
      <li class="nav-item"><b>Standard Methods</b></li>
      <li class="nav-item">
          <a href="/130">
            <span class="aep-id">130</span>
            Methods
          </a>
        </li>
      <li class="nav-item">
          <a href="/131">
            <span class="aep-id">131</span>
            Get
          </a>
        </li>
      <li class="nav-item">
          <a href="/132">
            <span class="aep-id">132</span>
            List
          </a>
        </li>
      <li class="nav-item">
          <a href="/136">
            <span class="aep-id">136</span>
            Custom methods
          </a>
        </li>
      <li class="nav-item">
          <a href="/133">
            <span class="aep-id">133</span>
            Create
          </a>
        </li>
      <li class="nav-item">
          <a href="/134">
            <span class="aep-id">134</span>
            Update
          </a>
        </li>
      <li class="nav-item">
          <a href="/135">
            <span class="aep-id">135</span>
            Delete
          </a>
        </li>
      <li class="nav-item"><b>Fields</b></li>
      <li class="nav-item">
          <a href="/141">
            <span class="aep-id">141</span>
            Quantities
          </a>
        </li>
      <li class="nav-item">
          <a href="/142">
            <span class="aep-id">142</span>
            Time and duration
          </a>
        </li>
      <li class="nav-item">
          <a href="/144">
            <span class="aep-id">144</span>
            Array fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/145">
            <span class="aep-id">145</span>
            Ranges
          </a>
        </li>
      <li class="nav-item">
          <a href="/140">
            <span class="aep-id">140</span>
            Field names
          </a>
        </li>
      <li class="nav-item">
          <a href="/146">
            <span class="aep-id">146</span>
            Generic fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/148">
            <span class="aep-id">148</span>
            Standard fields
          </a>
        </li>
      <li class="nav-item nav-item-active">
          <a href="/203">
            <span class="aep-id">203</span>
            Field behavior documentation
          </a>
        </li>
      <li class="nav-item"><b>Types</b></li>
      <li class="nav-item">
          <a href="/210">
            <span class="aep-id">210</span>
            Unicode
          </a>
        </li>
      <li class="nav-item">
          <a href="/143">
            <span class="aep-id">143</span>
            Standardized codes
          </a>
        </li>
      <li class="nav-item">
          <a href="/213">
            <span class="aep-id">213</span>
            Common components
          </a>
        </li>
      <li class="nav-item">
          <a href="/215">
            <span class="aep-id">215</span>
            Common component versions
          </a>
        </li>
      <li class="nav-item"><b>Design Patterns</b></li>
      <li class="nav-item">
          <a href="/154">
            <span class="aep-id">154</span>
            Resource freshness validation
          </a>
        </li>
      <li class="nav-item">
          <a href="/158">
            <span class="aep-id">158</span>
            Pagination
          </a>
        </li>
      <li class="nav-item">
          <a href="/151">
            <span class="aep-id">151</span>
            Long-running operations
          </a>
        </li>
      <li class="nav-item">
          <a href="/164">
            <span class="aep-id">164</span>
            Soft delete
          </a>
        </li>
      <li class="nav-item">
          <a href="/211">
            <span class="aep-id">211</span>
            Authorization checks
          </a>
        </li>
      <li class="nav-item">
          <a href="/157">
            <span class="aep-id">157</span>
            Partial responses
          </a>
        </li>
      <li class="nav-item">
          <a href="/160">
            <span class="aep-id">160</span>
            Filtering
          </a>
        </li>
      <li class="nav-item">
          <a href="/161">
            <span class="aep-id">161</span>
            Field masks
          </a>
        </li>
      <li class="nav-item">
          <a href="/162">
            <span class="aep-id">162</span>
            Resource Revisions
          </a>
        </li>
      <li class="nav-item">
          <a href="/193">
            <span class="aep-id">193</span>
            Errors
          </a>
        </li>
      <li class="nav-item">
          <a href="/214">
            <span class="aep-id">214</span>
            Resource expiration
          </a>
        </li>
      <li class="nav-item">
          <a href="/216">
            <span class="aep-id">216</span>
            States
          </a>
        </li>
      <li class="nav-item">
          <a href="/217">
            <span class="aep-id">217</span>
            Unreachable resources
          </a>
        </li>
      <li class="nav-item"><b>Batch Methods</b></li>
      <li class="nav-item">
          <a href="/231">
            <span class="aep-id">231</span>
            Batch methods: Get
          </a>
        </li>
      <li class="nav-item">
          <a href="/233">
            <span class="aep-id">233</span>
            Batch methods: Create
          </a>
        </li>
      <li class="nav-item">
          <a href="/234">
            <span class="aep-id">234</span>
            Batch methods: Update
          </a>
        </li>
      <li class="nav-item">
          <a href="/235">
            <span class="aep-id">235</span>
            Batch methods: Delete
          </a>
        </li>
      <li class="nav-item"><b>Security</b></li>
      <li class="nav-item"><b>Governance</b></li>
      <li class="nav-item">
          <a href="/100">
            <span class="aep-id">100</span>
            API Design Review FAQ
          </a>
        </li>
      <li class="nav-item">
          <a href="/205">
            <span class="aep-id">205</span>
            Beta-blocking changes
          </a>
        </li>
      <li class="nav-item"><b>Best Practices</b></li>
      <li class="nav-item">
          <a href="/180">
            <span class="aep-id">180</span>
            Backwards compatibility
          </a>
        </li>
      <li class="nav-item">
          <a href="/181">
            <span class="aep-id">181</span>
            Stability levels
          </a>
        </li>
      <li class="nav-item">
          <a href="/192">
            <span class="aep-id">192</span>
            Documentation
          </a>
        </li>
      <li class="nav-item">
          <a href="/200">
            <span class="aep-id">200</span>
            Precedent
          </a>
        </li>
      <li class="nav-item"><b>Protocol buffers</b></li>
      <li class="nav-item">
          <a href="/127">
            <span class="aep-id">127</span>
            HTTP and gRPC Transcoding
          </a>
        </li>
      <li class="nav-item">
          <a href="/191">
            <span class="aep-id">191</span>
            File and directory structure
          </a>
        </li>
      </ul>
</nav>
<section id="jump-content">
          
<aside id="aep-sidebar" class="docs-component-sidebar">
  <table id="aep-summary">
    <tr><th colspan="2">Field behavior documentation</th></tr>
    <tr><td>Slug</td><td>field-behavior-documentation</td></tr>
    <tr><td>Number</td><td>203</td></tr>
    <tr><td>Permalink</td><td><a href="https://aep.dev/203">aep.dev/203</a></td></tr>
    <tr><td>State</td><td>Approved</td></tr>
    <tr><td>Created</td><td>2024-04-17</td></tr>
    <tr><td>Updated</td><td>2024-04-17</td></tr>
  </table>

  <section id="aep-toc" class="docs-component-sidebar-toc">
    <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#guidance">Guidance</a><ul>
<li><a href="#field-behavior-of-nested-messages">field behavior of nested messages</a></li>
</ul>
</li>
<li><a href="#vocabulary">Vocabulary</a><ul>
<li><a href="#identifier">Identifier</a></li>
<li><a href="#immutable">Immutable</a></li>
<li><a href="#input-only">Input only</a></li>
<li><a href="#optional">Optional</a></li>
<li><a href="#output-only">Output only</a></li>
<li><a href="#required">Required</a></li>
<li><a href="#unordered-list">Unordered List</a></li>
</ul>
</li>
<li><a href="#backwards-compatibility">Backwards compatibility</a></li>
<li><a href="#rationale">Rationale</a><ul>
<li><a href="#identifier-field-behavior">Identifier field behavior</a></li>
<li><a href="#required-set-of-annotations">Required set of annotations</a></li>
<li><a href="#requiring-field-behavior">Requiring field behavior</a></li>
</ul>
</li>
<li><a href="#changelog">Changelog</a></li>
</ul>
</div>

  </section>

  <section class="docs-component-sidebar-actions">
    <ul>
      <li><a href="https://github.com/aep-dev/aep.dev/issues/">File Bug</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/blob/master/aep/general/0203">View source</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/edit/master/aep/general/0203">Edit this page</a></li>
    </ul>
  </section>
</aside>
<section id="aep-main" class="docs-component-main">
  <section class="section-breadcrumbs">
  <nav
    class="glue-breadcrumbs glue-mod-mt-std glue-mod-mb-std"
    aria-label="You are here."
  >
    <ol class="glue-breadcrumbs__list aep-breadcrumbs">
      <li class="glue-breadcrumbs__item" aria-level="1">
        <a class="glue-breadcrumbs__link" href="/">
          API Enhancement Proposals
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item" aria-level="2">
        <a class="glue-breadcrumbs__link" href="/general">
          General AEPs
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item glue-breadcrumbs__item--active"
          aria-level="3">
        Field behavior documentation
      </li>
    </ol>
  </nav>
</section>
  
  <h4 class="aep-id">field-behavior-documentation (AEP-203)</h4>
  <h1 id="field-behavior-documentation">Field behavior documentation</h1>
<p>When defining fields in protocol buffers, it is customary to explain to users
certain aspects of the field's behavior (such as whether it is required or
optional). Additionally, it can be useful for other tools to understand this
behavior (for example, to optimize client library signatures).</p>
<h2 id="guidance">Guidance</h2>
<p>APIs use the <code>aep.api.field_behavior</code> annotation to describe well-understood
field behavior, such as a field being required or immutable.</p>
<div class="highlight language-proto"><pre><span></span><code><span class="c1">// The audio data to be recognized.</span>
<span class="n">RecognitionAudio</span><span class="w"> </span><span class="na">audio</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[(</span><span class="n">aep.api.field_behavior</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">REQUIRED</span><span class="p">];</span>
</code></pre></div>
<ul>
<li>APIs <strong>must</strong> apply the <code>aep.api.field_behavior</code> annotation on every field on
  a message or sub-message used in a request.</li>
<li>The annotation <strong>must</strong> include any google.api.FieldBehavior values that
  accurately describe the behavior of the field.<ul>
<li><code>FIELD_BEHAVIOR_UNSPECIFIED</code> <strong>must not</strong> be used.</li>
</ul>
</li>
<li>APIs <strong>must</strong> at minimum use one of <code>REQUIRED</code>, <code>OPTIONAL</code>, or <code>OUTPUT_ONLY</code>.</li>
</ul>
<p><strong>Warning:</strong> Although <code>field_behavior</code> does not impact proto-level behavior,
many clients (e.g. CLIs and SDKs) rely on them to generate code. Thoroughly
review and consider which values are relevant when adding a new field.</p>
<p><strong>Note:</strong> The vocabulary given in this document is for <em>descriptive</em> purposes
only, and does not itself add any validation. The purpose is to consistently
document this behavior for clients.</p>
<h3 id="field-behavior-of-nested-messages">field behavior of nested messages</h3>
<p><code>aep.api.field_behavior</code> annotations on a nested message are independent of the
annotations of the parent.</p>
<p>For example, a nested message can have a field behavior of <code>REQUIRED</code> while the
parent field can be <code>OPTIONAL</code>:</p>
<div class="highlight language-proto"><pre><span></span><code><span class="kd">message</span><span class="w"> </span><span class="nc">Title</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">[(</span><span class="n">aep.api.field_behavior</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">REQUIRED</span><span class="p">];</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">Slide</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Title</span><span class="w"> </span><span class="na">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">[(</span><span class="n">aep.api.field_behavior</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">OPTIONAL</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>In the case above, if a <code>title</code> is specified, the <code>text</code> field is required.</p>
<h2 id="vocabulary">Vocabulary</h2>
<h3 id="identifier">Identifier</h3>
<p>The use of <code>IDENTIFIER</code> indicates that a field within a resource message is
used to identify the resource. It <strong>must</strong> be attached to the <code>path</code> field and
<strong>must not</strong> be attached to any other field (see <a href="./resource-paths#fields-representing-resource-paths">fields representing resource
paths</a>).</p>
<p>The <code>IDENTIFIER</code> value conveys that the field is not accepted as input (i.e.
<code>OUTPUT_ONLY</code>) in the context of a create method, while also being considered
<code>IMMUTABLE</code> and accepted as input for mutation methods that accept the resource
as the primary input e.g. <a href="./standard-methods">Standard Update</a>.</p>
<p>This annotation <strong>must not</strong> be applied to references to other resources within
a message.</p>
<h3 id="immutable">Immutable</h3>
<p>The use of <code>IMMUTABLE</code> indicates that a field on a resource cannot be changed
after it's creation. This can apply to either fields that are input or outputs,
required or optional.</p>
<p>When a service receives an immutable field in an update request (or similar),
even if included in the update mask, the service <strong>should</strong> ignore the field if
the value matches, but <strong>should</strong> error with <code>INVALID_ARGUMENT</code> if a change is
requested.</p>
<p>Potential use cases for immutable fields (this is not an exhaustive list) are:</p>
<ul>
<li>Attributes of resources that are not modifiable for the lifetime of the
  application (e.g. a disk type).</li>
</ul>
<p><strong>Note:</strong> Fields which are "conditionally immutable" <strong>must not</strong> be given the
immutable annotation.</p>
<h3 id="input-only">Input only</h3>
<p>The use of <code>INPUT_ONLY</code> indicates that the field is provided in requests and
that the corresponding field will not be included in output.</p>
<p>Additionally, a field <strong>should</strong> only be described as input only if it is a
field in a resource message or a field of a message included within a resource
message. Notably, fields in request messages (a message which only ever acts as
an argument to an RPC, with a name usually ending in <code>Request</code>) <strong>should not</strong>
be described as input only because this is already implied.</p>
<p>Potential use cases for input only fields (this is not an exhaustive list) are:</p>
<ul>
<li>The <code>ttl</code> field as described in <a href="/214">AEP-214</a>.</li>
</ul>
<p><strong>Warning:</strong> Input only fields are rare and should be considered carefully
before use.</p>
<h3 id="optional">Optional</h3>
<p>The use of <code>OPTIONAL</code> indicates that a field is not required.</p>
<p>A field <strong>may</strong> be described as optional if it is a field on a request message
(a message that is an argument to an RPC, usually ending in <code>Request</code>), or a
field on a submessage.</p>
<h3 id="output-only">Output only</h3>
<p>The use of <code>OUTPUT_ONLY</code> indicates that the field is provided in responses, but
that including the field in a message in a request does nothing (the server
<strong>must</strong> clear out any value in this field and <strong>must not</strong> throw an error as a
result of the presence of a value in this field on input). Similarly, services
<strong>must</strong> ignore the presence of output only fields in update field masks (see:
<a href="/161">AEP-161</a>).</p>
<p>Additionally, a field <strong>should</strong> only be described as output only if it is a
field in a resource message, or a field of a message farther down the tree.
Notably, fields in response messages (a message which only ever acts as a
return value to an RPC, usually ending in <code>Response</code>) <strong>should not</strong> be
described as output only because this is already implied.</p>
<p>Output only fields <strong>may</strong> be set to empty values if appropriate to the API.</p>
<p>Potential use cases for output only fields (this is not an exhaustive list)
are:</p>
<ul>
<li>Create or update timestamps.</li>
<li>Derived or structured information based on original user input.</li>
<li>Properties of a resource assigned by the service which can not be altered.</li>
</ul>
<h3 id="required">Required</h3>
<p>The use of <code>REQUIRED</code> indicates that the field <strong>must</strong> be present (and set to
a non-empty value) on the request.</p>
<p>A field <strong>should</strong> only be described as required if <em>either</em>:</p>
<ul>
<li>It is a field on a resource that a user provides somewhere as input.<ul>
<li>When <a href="./standard-methods">creating</a> the resource, a value <strong>must</strong> be
  provided for the field on the create request.</li>
<li>When <a href="./standard-methods">updating</a> the resource, the user <strong>may</strong> omit the
  field provided that the field is also absent from the field mask,
  indicating no change to the field (otherwise it <strong>must</strong> be provided).</li>
</ul>
</li>
<li>It is a field on a request message (a message that is an argument to an RPC,
  with a name usually ending in <code>Request</code>). In this case, a value <strong>must</strong> be
  provided as part of the request, and failure to do so <strong>must</strong> cause an error
  (usually <code>INVALID_ARGUMENT</code>).</li>
</ul>
<p>Fields <strong>should not</strong> be described as required in order to signify:</p>
<ul>
<li>A field which will always be present in a response.</li>
<li>A field which is conditionally required in some situations.</li>
<li>A field on any message (including messages that are resources) which is never
  used as user input.</li>
</ul>
<p><strong>Note:</strong> In most cases, empty values (such as <code>false</code> for booleans, <code>0</code> for
integers, or the unspecified value for enums) are indistinguishable from unset
values, and therefore setting a required field to a falsy value yields an
error. A corollary to this is that a required boolean must be set to <code>true</code>.</p>
<h3 id="unordered-list">Unordered List</h3>
<p>The use of <code>UNORDERED_LIST</code> on a repeated field of a resource indicates that
the service does not guarantee the order of the items in the list.</p>
<p>A field <strong>should</strong> be described as an unordered list if the service does not
guarantee that the order of the elements in the list will match the order that
the user sent, including a situation where the service will sort the list on
the user's behalf.</p>
<h2 id="backwards-compatibility">Backwards compatibility</h2>
<p>Adding or changing <code>aep.api.field_behavior</code> values can represent a semantic
change in the API that is perceived as incompatible for existing clients. The
following are examples of backwards incompatible changes with
<code>aep.api.field_behavior</code>:</p>
<ul>
<li>Adding <code>REQUIRED</code> to an existing field previously considered <code>OPTIONAL</code>
  (implicitly or otherwise)</li>
<li>Adding a new field annotated as <code>REQUIRED</code> to an existing request message</li>
<li>Adding <code>OUTPUT_ONLY</code> to an existing field previously accepted as input</li>
<li>Adding <code>INPUT_ONLY</code> to an existing field previously emitted as output</li>
<li>Adding <code>IMMUTABLE</code> to an existing field previously considered mutable</li>
<li>Removing <code>OUTPUT_ONLY</code> from an existing field previously ignored as input</li>
<li>Removing <code>IDENTIFIER</code> from an existing field.</li>
</ul>
<p>There are some changes that <em>are</em> backwards compatible, which are as follows:</p>
<ul>
<li>Adding <code>OPTIONAL</code> to an existing field</li>
<li>Adding <code>IDENTIFIER</code> to an existing <code>path</code> field</li>
<li>Changing from <code>REQUIRED</code> to <code>OPTIONAL</code> on an existing field</li>
<li>Changing from <code>OUTPUT_ONLY</code> and/or <code>IMMUTABLE</code> to <code>IDENTIFIER</code> on an existing
  field</li>
<li>Removing <code>REQUIRED</code> from an existing field</li>
<li>Removing <code>INPUT_ONLY</code> from an existing field previously excluded in responses</li>
<li>Removing <code>IMMUTABLE</code> from an existing field previously considered immutable</li>
</ul>
<h2 id="rationale">Rationale</h2>
<h3 id="identifier-field-behavior">Identifier field behavior</h3>
<p>Resource paths, the primary identifiers for any compliant resource, are never
fully constructed by the user on create. Such fields are typically assigned
<code>OUTPUT_ONLY</code> field behavior. They are, however, also often consumed as the
primary identifier in scenarios where the resource itself is the primary
request payload. Such fields could <em>not</em> be considered <code>OUTPUT_ONLY</code>.
Furthermore, in mutation requests, like Standard Update, the resource path as
the primary identifier cannot be changed in place. Such fields are typically
assigned <code>IMMUTABLE</code> field behavior. These conflicting and context-dependent
field behaviors meant that a new value was necessary to single out and convey
the behavior of the resource path field.</p>
<h3 id="required-set-of-annotations">Required set of annotations</h3>
<p>A field used in a request message must be either an input or an output.</p>
<p>In the case of an output, the <code>OUTPUT_ONLY</code> annotation is sufficient.</p>
<p>In the case of an input, a field is either required or optional, and therefore
should have at least the <code>REQUIRED</code> or <code>OPTIONAL</code> annotation, respectively.
Only providing <code>INPUT_ONLY</code> does not convey the necessity of the field, so
specifying either <code>REQUIRED</code> or <code>OPTIONAL</code> is still necessary.</p>
<h3 id="requiring-field-behavior">Requiring field behavior</h3>
<p>By including the field behavior annotation for each field, the overall behavior
that the resource exhibits is more clearly defined. Clearly defined field
behavior improves programmatic clients and user understanding.</p>
<p>Requiring the annotation also forces the API author to explicitly consider the
behavior when initially authoring of the API.</p>
<p>Modifying field behavior after initial authoring can result in
backwards-incompatible changes in clients. For example, making an optional
field required results in backwards-incompatible changes in the method
signature of an RPC or a resource in a Declarative client. See the
<a href="#backwards-compatibility">Backwards compatibility</a> section for more detailed
compatibility guidance.</p>
<h2 id="changelog">Changelog</h2>
<ul>
<li><strong>2024-04-17</strong>: Added initial guidance.</li>
</ul>
  <footer>
  Except as otherwise noted, the content of this page is licensed under the
  <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
  Attribution 4.0 License</a>, and code samples are licensed under the
  <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
  <span class="no-print">For details, see <a href="/licensing">content
  licensing</a>.</span>
</footer>
</section>

        </section>
      </main>
      
    </div>
    <script src="//www.gstatic.com/external_hosted/hammerjs/v2_0_2/hammer.min.js"></script>
    <script src="//www.gstatic.com/glue/v22_1/glue-vanilla.min.js"></script>
    <script type="text/javascript">
      const headerElement = document.querySelector('.glue-header');
      if (headerElement) {
        new window.glue.ui.header.Header(headerElement);
      }
    </script>
  </body>
</html>