<!DOCTYPE html>
<html lang="en-US" class="glue-flexbox">
  <head>
    <title>AEP-155: Idempotency</title>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,maximum-scale=2">
    <link href="//fonts.googleapis.com/css?family=Roboto:100,300,400,500,700|Google+Sans:400,500|Product+Sans:400&amp;lang=en" rel="stylesheet"></link>
    <link rel="shortcut icon" href="/assets/favicon.ico">
    <link rel="stylesheet" type="text/css" media="screen" href="//www.gstatic.com/glue/v22_1/glue.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="/assets/css/style.css?v=40a5ab36">
    <link rel="stylesheet" type="text/css" media="print" href="/assets/css/print.css?v=40a5ab36">
    <script type="text/javascript" src="//code.jquery.com/jquery-3.4.0.min.js"></script>
    <script type="text/javascript" src="//www.gstatic.com/glue/latest/glue-detect.min.js"></script>
    <script type="text/javascript">
      $('html').css('visibility', 'hidden');
      $.when($.ready).then(() => {
        $('html').css('visibility', 'visible');
      });
    </script>
    <script type="text/javascript" src="/assets/js/global.js?v=40a5ab36"></script>
    
<script type="text/javascript" src="/assets/js/syntax.js"></script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NSXMVSDN');</script>
    <!-- End Google Tag Manager -->
  </head>
  <body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NSXMVSDN"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
    <!-- prettier-ignore -->
<header class="glue-header glue-header--single">
  <div class="glue-header__bar glue-header__bar--desktop glue-header__drawer">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="API Enhancement Proposals">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                <!--<use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>-->
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- LINK BAR-->
      <div class="glue-header__container glue-header__container--flex-auto">
        <nav class="glue-header__link-bar">
          <ul id="list-1" class="glue-header__list">
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/general" aria-level="1">Browse AEPs</a>
                </li>
              
            
              
                <li class="glue-header__item">
                  <a class="glue-header__link" href="/contributing" aria-level="1">Contributing</a>
                </li>
              
            
          </ul>
        </nav>
      </div>
      <!-- CTA-->
      <div class="glue-header__container glue-header__container--cta">
        <div class="glue-header__cta">
        <div class="glue-sitesearch">
          <form method="GET" action="/search">
          <label for="q">Search this site</label>
          <input class="glue-sitesearch__input" type="text" name="q" id="q"
            placeholder="Search AEPs">
          <button type="submit" class="glue-button glue-sitesearch__submit" title="Submit">
            <svg role="img" class="glue-icon glue-icon--24px">
            <use xlink:href="/assets/images/glue-icons.svg#search"></use>
            </svg>
          </button>
          </form>
        </div>
        <a href="https://github.com/aep-dev/aep.dev" target="_blank" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <!-- Mobile header placeholder -->
  <div class="glue-header__bar glue-header__bar--mobile">
    <div class="glue-header__tier">
      <!-- LOCK up-->
      <div class="glue-header__container">
        <div class="glue-header__lock-up">
          <div class="glue-header__hamburger glue-header__hamburger--first-tier">
            <div class="glue-header__hamburger-wrapper">
              <button type="button" class="glue-header__drawer-toggle-btn"
                aria-controls="drawer" aria-expanded="false" aria-label="Open the navigation drawer">
                <svg role="img" class="glue-icon glue-icon--24px"><use xlink:href="/assets/images/glue-icons.svg#menu"></use></svg>
              </button>
            </div>
          </div>
          <div class="glue-header__logo">
            <a class="glue-header__logo-link" href="/" title="Google">
              <div class="glue-header__logo-container">
                <svg role="img" aria-hidden="true" class="glue-header__logo-svg">
                  <!--<use xlink:href="/assets/images/glue-icons.svg#google-color-logo"></use>-->
                </svg>
              </div>
              <p class="glue-header__logo--product">AEPs</p>
            </a>
          </div>
          <!-- SKIP -->
          <a href="#page-content" class="glue-header__skip-content">
            <p class="glue-header__skip-content-text">Jump to Content</p>
          </a>
        </div>
      </div>
      <!-- CTA -->
      <div class="glue-header__container">
        <div class="glue-header__cta">
        <a href="https://github.com/aep-dev/aep.dev" class="glue-button glue-button--high-emphasis">
          <img src="/assets/images/github.png" class="github-logo">
          View on GitHub
        </a>
        </div>
      </div>
    </div>
  </div>
  <div class="glue-header__drawer-backdrop"></div>
</header>
    <div class="glue-page">
      
      <main role="main" id="page-content">
        
<nav id="aep-nav" class="docs-component-nav">
  <ul class="nav-list">
    <li class="nav-item nav-item-header">AEPs by Scope</li>
    <li class="nav-item">
      <a href="/general">General</a>
    </li>
    <li class="nav-item nav-item-header">AEPs</li>
    <li class="nav-item"><b>Meta</b></li>
      <li class="nav-item">
          <a href="/1">
            <span class="aep-id">1</span>
            AEP Purpose and Guidelines
          </a>
        </li>
      <li class="nav-item">
          <a href="/2">
            <span class="aep-id">2</span>
            AEP Numbering and Organization
          </a>
        </li>
      <li class="nav-item">
          <a href="/8">
            <span class="aep-id">8</span>
            AEP Style and Guidance
          </a>
        </li>
      <li class="nav-item"><b>General</b></li>
      <li class="nav-item">
          <a href="/3">
            <span class="aep-id">3</span>
            Glossary
          </a>
        </li>
      <li class="nav-item">
          <a href="/5">
            <span class="aep-id">5</span>
            Designing an API
          </a>
        </li>
      <li class="nav-item"><b>Resources</b></li>
      <li class="nav-item">
          <a href="/122">
            <span class="aep-id">122</span>
            Resource paths
          </a>
        </li>
      <li class="nav-item">
          <a href="/126">
            <span class="aep-id">126</span>
            Enumerations
          </a>
        </li>
      <li class="nav-item">
          <a href="/4">
            <span class="aep-id">4</span>
            Resource types
          </a>
        </li>
      <li class="nav-item">
          <a href="/121">
            <span class="aep-id">121</span>
            Resource-oriented design
          </a>
        </li>
      <li class="nav-item">
          <a href="/124">
            <span class="aep-id">124</span>
            Resource association
          </a>
        </li>
      <li class="nav-item">
          <a href="/156">
            <span class="aep-id">156</span>
            Singleton resources
          </a>
        </li>
      <li class="nav-item">
          <a href="/159">
            <span class="aep-id">159</span>
            Reading across collections
          </a>
        </li>
      <li class="nav-item"><b>Standard Methods</b></li>
      <li class="nav-item">
          <a href="/130">
            <span class="aep-id">130</span>
            Methods
          </a>
        </li>
      <li class="nav-item">
          <a href="/131">
            <span class="aep-id">131</span>
            Get
          </a>
        </li>
      <li class="nav-item">
          <a href="/132">
            <span class="aep-id">132</span>
            List
          </a>
        </li>
      <li class="nav-item">
          <a href="/136">
            <span class="aep-id">136</span>
            Custom methods
          </a>
        </li>
      <li class="nav-item">
          <a href="/133">
            <span class="aep-id">133</span>
            Create
          </a>
        </li>
      <li class="nav-item">
          <a href="/134">
            <span class="aep-id">134</span>
            Update
          </a>
        </li>
      <li class="nav-item">
          <a href="/135">
            <span class="aep-id">135</span>
            Delete
          </a>
        </li>
      <li class="nav-item"><b>Fields</b></li>
      <li class="nav-item">
          <a href="/141">
            <span class="aep-id">141</span>
            Quantities
          </a>
        </li>
      <li class="nav-item">
          <a href="/142">
            <span class="aep-id">142</span>
            Time and duration
          </a>
        </li>
      <li class="nav-item">
          <a href="/144">
            <span class="aep-id">144</span>
            Array fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/145">
            <span class="aep-id">145</span>
            Ranges
          </a>
        </li>
      <li class="nav-item">
          <a href="/140">
            <span class="aep-id">140</span>
            Field names
          </a>
        </li>
      <li class="nav-item">
          <a href="/146">
            <span class="aep-id">146</span>
            Generic fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/148">
            <span class="aep-id">148</span>
            Standard fields
          </a>
        </li>
      <li class="nav-item">
          <a href="/203">
            <span class="aep-id">203</span>
            Field behavior documentation
          </a>
        </li>
      <li class="nav-item"><b>Types</b></li>
      <li class="nav-item">
          <a href="/210">
            <span class="aep-id">210</span>
            Unicode
          </a>
        </li>
      <li class="nav-item">
          <a href="/143">
            <span class="aep-id">143</span>
            Standardized codes
          </a>
        </li>
      <li class="nav-item">
          <a href="/213">
            <span class="aep-id">213</span>
            Common components
          </a>
        </li>
      <li class="nav-item">
          <a href="/215">
            <span class="aep-id">215</span>
            Common component versions
          </a>
        </li>
      <li class="nav-item"><b>Design Patterns</b></li>
      <li class="nav-item">
          <a href="/154">
            <span class="aep-id">154</span>
            Resource freshness validation
          </a>
        </li>
      <li class="nav-item">
          <a href="/158">
            <span class="aep-id">158</span>
            Pagination
          </a>
        </li>
      <li class="nav-item">
          <a href="/151">
            <span class="aep-id">151</span>
            Long-running operations
          </a>
        </li>
      <li class="nav-item">
          <a href="/164">
            <span class="aep-id">164</span>
            Soft delete
          </a>
        </li>
      <li class="nav-item">
          <a href="/211">
            <span class="aep-id">211</span>
            Authorization checks
          </a>
        </li>
      <li class="nav-item">
          <a href="/157">
            <span class="aep-id">157</span>
            Partial responses
          </a>
        </li>
      <li class="nav-item">
          <a href="/160">
            <span class="aep-id">160</span>
            Filtering
          </a>
        </li>
      <li class="nav-item">
          <a href="/161">
            <span class="aep-id">161</span>
            Field masks
          </a>
        </li>
      <li class="nav-item">
          <a href="/162">
            <span class="aep-id">162</span>
            Resource Revisions
          </a>
        </li>
      <li class="nav-item">
          <a href="/193">
            <span class="aep-id">193</span>
            Errors
          </a>
        </li>
      <li class="nav-item">
          <a href="/214">
            <span class="aep-id">214</span>
            Resource expiration
          </a>
        </li>
      <li class="nav-item">
          <a href="/216">
            <span class="aep-id">216</span>
            States
          </a>
        </li>
      <li class="nav-item">
          <a href="/217">
            <span class="aep-id">217</span>
            Unreachable resources
          </a>
        </li>
      <li class="nav-item"><b>Batch Methods</b></li>
      <li class="nav-item">
          <a href="/231">
            <span class="aep-id">231</span>
            Batch methods: Get
          </a>
        </li>
      <li class="nav-item">
          <a href="/233">
            <span class="aep-id">233</span>
            Batch methods: Create
          </a>
        </li>
      <li class="nav-item">
          <a href="/234">
            <span class="aep-id">234</span>
            Batch methods: Update
          </a>
        </li>
      <li class="nav-item">
          <a href="/235">
            <span class="aep-id">235</span>
            Batch methods: Delete
          </a>
        </li>
      <li class="nav-item"><b>Security</b></li>
      <li class="nav-item"><b>Governance</b></li>
      <li class="nav-item">
          <a href="/100">
            <span class="aep-id">100</span>
            API Design Review FAQ
          </a>
        </li>
      <li class="nav-item">
          <a href="/205">
            <span class="aep-id">205</span>
            Beta-blocking changes
          </a>
        </li>
      <li class="nav-item"><b>Best Practices</b></li>
      <li class="nav-item">
          <a href="/180">
            <span class="aep-id">180</span>
            Backwards compatibility
          </a>
        </li>
      <li class="nav-item">
          <a href="/181">
            <span class="aep-id">181</span>
            Stability levels
          </a>
        </li>
      <li class="nav-item">
          <a href="/192">
            <span class="aep-id">192</span>
            Documentation
          </a>
        </li>
      <li class="nav-item">
          <a href="/200">
            <span class="aep-id">200</span>
            Precedent
          </a>
        </li>
      <li class="nav-item"><b>Protocol buffers</b></li>
      <li class="nav-item">
          <a href="/127">
            <span class="aep-id">127</span>
            HTTP and gRPC Transcoding
          </a>
        </li>
      <li class="nav-item">
          <a href="/191">
            <span class="aep-id">191</span>
            File and directory structure
          </a>
        </li>
      </ul>
</nav>
<section id="jump-content">
          
<aside id="aep-sidebar" class="docs-component-sidebar">
  <table id="aep-summary">
    <tr><th colspan="2">Idempotency</th></tr>
    <tr><td>Slug</td><td>idempotency</td></tr>
    <tr><td>Number</td><td>155</td></tr>
    <tr><td>Permalink</td><td><a href="https://aep.dev/155">aep.dev/155</a></td></tr>
    <tr><td>State</td><td>Approved</td></tr>
    <tr><td>Created</td><td>2019-05-06</td></tr>
    <tr><td>Updated</td><td>2019-05-06</td></tr>
  </table>

  <section id="aep-toc" class="docs-component-sidebar-toc">
    <div class="toc"><span class="toctitle">Contents</span><ul>
<li><a href="#guidance">Guidance</a></li>
<li><a href="#further-reading">Further reading</a></li>
<li><a href="#rationale">Rationale</a><ul>
<li><a href="#naming-the-field-idempotency_key">Naming the field idempotency_key</a></li>
<li><a href="#using-uuids-for-request-identification">Using UUIDs for request identification</a></li>
</ul>
</li>
<li><a href="#changelog">Changelog</a></li>
</ul>
</div>

  </section>

  <section class="docs-component-sidebar-actions">
    <ul>
      <li><a href="https://github.com/aep-dev/aep.dev/issues/">File Bug</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/blob/master/aep/general/0155">View source</a></li>
      <li><a href="https://github.com/aep-dev/aep.dev/edit/master/aep/general/0155">Edit this page</a></li>
    </ul>
  </section>
</aside>
<section id="aep-main" class="docs-component-main">
  <section class="section-breadcrumbs">
  <nav
    class="glue-breadcrumbs glue-mod-mt-std glue-mod-mb-std"
    aria-label="You are here."
  >
    <ol class="glue-breadcrumbs__list aep-breadcrumbs">
      <li class="glue-breadcrumbs__item" aria-level="1">
        <a class="glue-breadcrumbs__link" href="/">
          API Enhancement Proposals
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item" aria-level="2">
        <a class="glue-breadcrumbs__link" href="/general">
          General AEPs
        </a>
      </li>
      
      <li class="glue-breadcrumbs__item glue-breadcrumbs__item--active"
          aria-level="3">
        Idempotency
      </li>
    </ol>
  </nav>
</section>
  
  <h4 class="aep-id">idempotency (AEP-155)</h4>
  <h1 id="idempotency">Idempotency</h1>
<p>It is sometimes useful for an API to have a unique, customer-provided
identifier for particular requests. This can be useful for several purposes,
such as:</p>
<ul>
<li>De-duplicating requests from parallel processes</li>
<li>Ensuring the safety of retries</li>
<li>Auditing</li>
</ul>
<p>The purpose of idempotency keys is to provide idempotency guarantees: allowing
the same request to be issued more than once without subsequent calls having
any effect. In the event of a network failure, the client can retry the
request, and the server can detect duplication and ensure that the request is
only processed once.</p>
<h2 id="guidance">Guidance</h2>
<p>APIs <strong>may</strong> add a <code>aep.api.IdempotencyKey idempotency_key</code> parameter to
request messages (including those of standard methods) in order to uniquely
identify particular requests. API servers <strong>must not</strong> execute requests with
the same <code>idempotency_key</code> more than once.</p>
<div class="highlight language-proto"><pre><span></span><code><span class="kd">message</span><span class="w"> </span><span class="nc">CreateBookRequest</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// The parent resource where this book will be created.</span>
<span class="w">  </span><span class="c1">// Format: publishers/{publisher}</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">parent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">(</span><span class="n">google.api.field_behavior</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">REQUIRED</span><span class="p">,</span>
<span class="w">    </span><span class="p">(</span><span class="n">google.api.resource_reference</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">child_type</span><span class="o">:</span><span class="w"> </span><span class="s">&quot;library.example.com/Book&quot;</span>
<span class="w">    </span><span class="p">}];</span>

<span class="w">  </span><span class="c1">// The book to create.</span>
<span class="w">  </span><span class="n">Book</span><span class="w"> </span><span class="na">book</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">[(</span><span class="n">google.api.field_behavior</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">REQUIRED</span><span class="p">];</span>

<span class="w">  </span><span class="c1">// This request is only idempotent if `idempotency_key` is provided.</span>
<span class="w">  </span><span class="c1">//</span>
<span class="w">  </span><span class="c1">// This key will be honored for at least one hour after the first time it is</span>
<span class="w">  </span><span class="c1">// seen by the server.</span>
<span class="w">  </span><span class="c1">//</span>
<span class="w">  </span><span class="c1">// The key is restricted to 36 ASCII characters. A random UUID is recommended.</span>
<span class="w">  </span><span class="n">aep.api.IdempotencyKey</span><span class="w"> </span><span class="na">idempotency_key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">(</span><span class="n">aep.api.field_info</span><span class="p">)</span><span class="o">.</span><span class="na">minimum_lifetime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">seconds</span><span class="o">:</span><span class="w"> </span><span class="mi">3600</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>
<p>[<code>aep.api.IdempotencyKey</code>][] has a <code>key</code> and a <code>first_sent</code> timestamp.</p>
<ul>
<li><code>key</code> is simply a unique identifier.</li>
</ul>
</li>
<li>
<p>Providing an idempotency key <strong>must</strong> guarantee idempotency.</p>
<ul>
<li>
<p>If a duplicate request is detected, the server <strong>must</strong> return one of:</p>
<ul>
<li>A response equivalent to the response for the previously successful
  request, because the client most likely did not receive the previous
  response.</li>
<li>An error indicating that the <code>first_sent</code> field of the idempotency key is
  invalid or cannot be honored (expired, in the future, or differs from a
  previous <code>first_sent</code> value with the same <code>key</code>).</li>
<li>
<p>An error, if returning an equivalent response is not possible.</p>
<p>For example, if a resource was created, then deleted, and then a
duplicate request to create the resource is received, the server <strong>may</strong>
return an error if returning the previously created resource is not
possible.</p>
</li>
</ul>
</li>
<li>
<p>APIs <strong>should</strong> honor idempotency keys for at least an hour.</p>
<ul>
<li>When using protocol buffers, idempotency keys that are UUIDs <strong>must</strong> be
  annotated with a minimum lifetime using the extension
  [<code>(aep.api.field_info).minimum_lifetime</code>][].</li>
</ul>
</li>
</ul>
</li>
<li>
<p>The <code>idempotency_key</code> field <strong>must</strong> be provided on the request message to
  which it applies (and it <strong>must not</strong> be a field on resources themselves).</p>
<ul>
<li>The <code>first_sent</code> field can be used by API servers to determine if a key is
  expired. API servers <strong>must</strong> reject requests with expired keys, and
  <strong>must</strong> reject requests with keys that are in the future. When feasible,
  API servers <strong>should</strong> reject requests that use the same <code>key</code> but have a
  different <code>first_sent</code> timestamp.</li>
<li>The <code>key</code> field <strong>must</strong> be able to be a UUID, and <strong>may</strong> allow UUIDs to
  be the only valid format. The format restrictions for idempotency keys
  <strong>must</strong> be documented.</li>
</ul>
</li>
<li>
<p>Idempotency keys <strong>should</strong> be optional.</p>
</li>
</ul>
<h2 id="further-reading">Further reading</h2>
<ul>
<li>For which codes to retry, see <a href="https://aep.dev/194">AEP-194</a>.</li>
<li>For how to retry errors in client libraries, see
  <a href="https://aep.dev/4221">AEP-4221</a>.</li>
</ul>
<h2 id="rationale">Rationale</h2>
<h3 id="naming-the-field-idempotency_key">Naming the field <code>idempotency_key</code></h3>
<p>The original content from which this AEP is derived defines a <code>request_id</code>
field; we define <code>idempotency_key</code> instead for two reasons:</p>
<ol>
<li>There is an <a href="https://datatracker.ietf.org/doc/draft-ietf-httpapi-idempotency-key-header/">active Internet-Draft</a> to standardize an
   HTTP header named <code>Idempotency-Key</code>.</li>
<li>There may be edge cases in which separately identifying idempotent requests
   is useful; <code>request_id</code> would be more appropriate for such use cases. For
   example, an API producer might be testing the idempotency behavior of the
   API server, and might want to issue multiple requests with the same
   <code>idempotency_key</code> and trace the behavior of each request separately.</li>
</ol>
<!-- prettier-ignore-start -->
<!-- prettier-ignore-end -->

<h3 id="using-uuids-for-request-identification">Using UUIDs for request identification</h3>
<p>When a value is required to be unique, leaving the format open-ended can lead
to API consumers incorrectly providing a duplicate identifier. As such,
standardizing on a universally unique identifier drastically reduces the chance
for collisions when done correctly.</p>
<h2 id="changelog">Changelog</h2>
<ul>
<li><strong>2023-23-20</strong>: Adopt AEP from from Google's AIP with the following changes:<ul>
<li>Rename field from <code>request_id</code> to <code>idempotency_key</code> (plus some minor
  releated rewording).</li>
<li>Add a common component [<code>aep.api.IdempotencyKey</code>][] and use this rather
  than <code>string</code> for the <code>idempotency_key</code> field; add related guidance about
  <code>IdempotencyKey.first_seen</code>.</li>
<li>Remove guidance about annotating <code>idempotency_key</code> with
  <code>(google.api.field_info).format</code>.</li>
<li>Add guidance about annotating <code>idempotency_key</code> with
  [<code>(aep.api.field_info).minimum_lifetime</code>].</li>
<li>Update guidance about responses to be more explicit about success and error
  cases, while allowing "equivalent" rather than identical responses for
  subsequent requests.</li>
<li>Temporarily removed the section about stale success responses, pending
  further discussion.</li>
</ul>
</li>
<li><strong>2023-10-02</strong>: Add UUID format extension guidance.</li>
<li><strong>2019-08-01</strong>: Changed the examples from "shelves" to "publishers", to
  present a better example of resource ownership.</li>
</ul>
  <footer>
  Except as otherwise noted, the content of this page is licensed under the
  <a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons
  Attribution 4.0 License</a>, and code samples are licensed under the
  <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a>.
  <span class="no-print">For details, see <a href="/licensing">content
  licensing</a>.</span>
</footer>
</section>

        </section>
      </main>
      
    </div>
    <script src="//www.gstatic.com/external_hosted/hammerjs/v2_0_2/hammer.min.js"></script>
    <script src="//www.gstatic.com/glue/v22_1/glue-vanilla.min.js"></script>
    <script type="text/javascript">
      const headerElement = document.querySelector('.glue-header');
      if (headerElement) {
        new window.glue.ui.header.Header(headerElement);
      }
    </script>
  </body>
</html>